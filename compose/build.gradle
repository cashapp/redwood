if (!file('upstream/.git').exists()) {
  throw new RuntimeException(
    "Missing 'upstream' git submodule clone. Did you run 'git submodule update --init'?")
}

def upstreamDependencyVersions = file('upstream/buildSrc/build_dependencies.gradle').text
if (!upstreamDependencyVersions.contains("build_versions.kotlin = \"${versions.kotlin}\"")) {
  throw new RuntimeException(
    "Upstream git repository Kotlin version does not match project dependency version ${versions.kotlin}")
}
if (!upstreamDependencyVersions.contains("build_versions.kotlin_coroutines = \"${versions.kotlinx.coroutines}\"")) {
  throw new RuntimeException(
    "Upstream git repository Kotlin coroutines version does not match project dependency version ${versions.kotlinx.coroutines}")
}
