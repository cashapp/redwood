import app.cash.redwood.buildsupport.KmpTargets

apply plugin: 'org.jetbrains.kotlin.multiplatform'
apply plugin: 'kotlinx-atomicfu'
apply plugin: 'dev.drewhamilton.poko'

redwoodBuild {
  publishing()
}

kotlin {
  KmpTargets.addAllTargets(project)

  sourceSets {
    commonTest {
      dependencies {
        implementation libs.kotlin.test
      }
    }
  }
}

spotless {
  kotlin {
    // Internal MIT-licensed files from Meta.
    targetExclude("src/**/kotlin/app/cash/redwood/yoga/internal/**")
  }
}

tasks.named("dokkaHtmlPartial") {
  // Don't document this module as it's entirely implementation detail.
  enabled = false
}
